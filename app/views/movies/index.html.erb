<div class="jumbotron grid-container">
  <h1>Movies</h1>

  <div class="container grid-25">
    <p>Categories</p>
    <% Category.all.each do |category| %>
      <div><%= "#{category.name} (#{Movie.where(category: category).count})"%></div>
    <% end %>
  </div>

  <div class="grid-50">
    <% if @movies.any? %>
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Title</th>
            <th scope="col">Rating</th>
            <th scope="col">Category</th>
            <% if logged_in? %>
              <th colspan="3"></th>
            <% end %>
          </tr>
        </thead>

        <div>

        </div>

        <% @movies.each do |movie| %>
          <tr>
            <td><%= movie.title %></td>
            <td><%= movie.rating %></td>
            <td><%= movie.category.name %></td>
            <% if logged_in? && movie.author_id == current_user.id %>
              <td><%= link_to 'Show', movie %></td>
              <td><%= link_to 'Edit', edit_movie_path(movie) %></td>
              <td><%= link_to 'Destroy', movie, method: :delete,
                                              data: { confirm: 'Are you sure?' } %></td>
            <% end %>
          </tr>
        <% end %>
      </table>
    <% else %>
      <div>No movies. Would you like to add one?</div>
    <% end %>

    <%= will_paginate @movies %>
  </div>

  <div class="container grid-25">
    <p>Rating</p>
    <% [1, 2, 3, 4, 5].each do |num| %>
      <div><%= "#{num} (#{Movie.where(rating: num).count}) " %></div>
    <% end %>
  </div>
</div>

<nav class="navbar navbar-right">
  <div class="nav-links">
    <span class="btn btn-link"><%= link_to 'Add new movie', new_movie_path %></span>
    <span class="btn btn-link"><%= link_to 'Add new category', new_category_path %></span>
  </div>
</nav>
